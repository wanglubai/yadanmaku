播放器日志上报接口（新版）

本项目为原播放器日志上报接口的修改版，原版继续保留，新版本的播放器（包括PC/iOS/安卓）统一按照下列格式上报播放器日志

--------------------------
### 上报[状态]
1. 上报地址
  - 测试环境: **POST http://172.16.9.3:17014/v1/state**
  - 生产环境: **POST http://playerlog.longzhu.com/v1/state**
2. 上报数据(POST Body)一共16个字段，以双竖线分隔，形如
	CaseId||OSType||OSVer||NetType||Ip||AppVersion||PlayerVer||Bandwidth||CaseId||UserId||RoomId||SupplierId||StreamId||StreamType||StreamDefinition||DecodeType||StreamIP

| 名称       |  字段名   |  类型  | 枚举 | 说明 |
| :--------   | :-----  | ----  | :---- | :--- |
| 事件ID | CaseId | string |  | 客户端生成本次播放事件的唯一ID(12位) |
| 设备OS | OSType | string | A <br/> I <br/> PC | 用户分类 |
| OS版本 | OSVer | string | 手机：手机版本号 <br/> PC：XP、7、8、10 | 定位发生问题的版本 |
| 网络环境 | NetType | int | 1-wifi <br/> 2-2G <br/> 3-3G <br/> 4-4G <br/> 5-PC <br/> 6-other | 网络环境 |
| 外网IP | Ip | string | 114.114.114.114 | 通过固定接口返回值内的IP |
| APP版本号 | AppVersion | string | 3.4.5 | 对外版本号 |
| 播放器版本 | PlayerVer | string | ksy_2.3(I) <br/> qn_3.6(A) <br/> v2.0.6(PC) | 播放器版本号 |
| 用户带宽 | Bandwidth | int | 2000（bps） | 用户上行带宽模块 |
| 用户ID | UserId | int | 33406749 | 登陆用户ID |
| 房间ID | RoomId | int | 425760 | 当前房间ID |
| 供应商ID | SupplierId | int | 12 | 根据平台分配的ID填写 |
| 流ID | StreamId | string | http://xxxxx <br/> rtmp://xxxxx | 播放地址 |
| 流类型 | StreamType | int | 1-flv <br/> 2-rtmp <br/> 3-hls | 根据播放器地址判断 |
| 流清晰度 | StreamDefinition | int | 1-标清 <br/> 2-高清 <br/> 3-超清 <br/> 4-蓝光 <br/> 5-源码流 | livestream接口中获取的ID |
| 解码类型 | DecodeType | int | 1-硬解 <br/> 2-软解 <br/> 3-PC | PC端全部填3 |
| 节点IP | StreamIP | string | 114.114.114.114 | CDN节点IP地址 |

3. 上报的[状态]有效期默认是**24小时**，保存在consul：service/go/playerlogreceiver/stateKeyExpire中，修改consul后需要重启程序生效



### 上报[事件]
1. 上报地址
  - 测试环境: **POST http://172.16.9.3:17014/v1/event**
  - 生产环境: **POST http://playerlog.longzhu.com/v1/event**
2. 上报数据(POST Body)一共10个字段，以双竖线分隔，形如
	uuId||CaseId||StartTime||AvgRate||GetAddressTime||LoadFirstDataTime||LoadDurationTime||StuckNum||StuckDurationTime||PlayDurationTime

	多条数据上报时，每条数据之间用|~|分隔，形如
	CaseId||uuId||StartTime||AvgRate||GetAddressTime||LoadFirstDataTime||LoadDurationTime||StuckNum||StuckDurationTime||PlayDurationTime|~|uuId||CaseId||StartTime||AvgRate||GetAddressTime||LoadFirstDataTime||LoadDurationTime||StuckNum||StuckDurationTime||PlayDurationTime|~|CaseId||uuId||StartTime||AvgRate||GetAddressTime||LoadFirstDataTime||LoadDurationTime||StuckNum||StuckDurationTime||PlayDurationTime

| 名称       |  字段名   |  类型  | 枚举 | 说明 |
| :--------   | :-----  | ----  | :---- | :--- |
| 事件ID | CaseId | string |  | 客户端生成本次播放事件的唯一ID(12位) |
| 设备唯一ID | uuId | string | xx-xx-xx-xx-xx-xx | 标识用户唯一ID， H5播放器需要更新的部分 取cookie（_ma） 第二个.后的数据 [udid.fvt]  |
| 开始时间戳 | StartTime | int | 1478675065 | 开始时10位时间戳 |
| 平均码率 | AvgRate | int | 2000（bps） | （事件结束bufferSize-事件开始bufferSize）/60 |
| 获取地址时长 | GetAddressTime | int | 111(ms) | 从请求livestream接口获取到播放地址结束的时间 |
| 读取内容时长 | LoadFirstDataTime | int | 222(ms) | 从拿到播放地址到获取到第一个数据包结束的时间 |
| 首屏加载时长 | LoadDurationTime | int | 333(ms) | 从拿到第一个数据包到出现第一桢画面结束的时间 |
| 卡顿次数 | StuckNum | int | 2 | 一分钟内产生的卡顿次数 |
| 卡顿等待总时长 | StuckDurationTime | int | 210（ms） | 一分钟内卡顿时间累加 |
| 播放时长 | PlayDurationTime | int | 6000（ms） | 手机端开启记时，PC全部填写默认 |

----------------------------------

